<div class="container-fluid mt-4">
  <div class="row g-4">
    
    <aside class="col-lg-2 col-md-3">
      <app-category-sidebar></app-category-sidebar>
    </aside>

    <div class="col-lg-10 col-md-9"> <div class="d-flex justify-content-center mb-4">
        <app-categories></app-categories>
      </div>

      <div class="products-column">
        <h2 class="mb-4">
          {{ currentCategory ? ('Catégorie : ' + currentCategory) : 'Tous les Produits' }}
        </h2>
        
        <div class="containerProduits">
          <div class="product-card" *ngFor="let p of filteredList()">
            <div class="card shadow-sm h-100">
              <img [alt]="p.title" [src]="p.images[0]" class="card-img-top p-2" />

              <div class="card-body d-flex flex-column">
                <h6 class="fw-bold">{{ p.title }}</h6>
                <p class="text-muted small flex-grow-1" style="display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;">
                  {{ p.description }}
                </p>

                <div class="mt-3">
                  <p class="fw-bold fs-5 text-primary mb-2">
                    {{ p.price | currency: currencyService.selectedCurrency() }}
                  </p>
                  
                  <div class="d-flex gap-2">
                    <button class="btn btn-outline-primary fw-bold flex-grow-1" [routerLink]="['/produit', p.id]">
                      Détails
                    </button>

                    <button class="btn btn-warning fw-bold flex-grow-1" (click)="addProduitToCart(p)">
                      Ajouter au panier <i class="bi bi-cart-plus"></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div *ngIf="filteredList().length === 0" class="mt-4">
          <div class="alert alert-info text-center">Aucun produit trouvé.</div>
        </div>
      </div>
    </div> </div> </div>