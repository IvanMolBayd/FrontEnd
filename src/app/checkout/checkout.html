<div class="container mt-5 mb-5">
    <div class="row">
        <!-- Formulaire de Livraison -->
        <div class="col-md-8">
            <h2 class="mb-4">Informations de Livraison</h2>
            <div class="card shadow-sm border-0 p-4 mb-4">
                <form #checkoutForm="ngForm">
                    <div class="mb-3">
                        <label class="form-label">Nom complet</label>
                        <input type="text" class="form-control" [(ngModel)]="shippingInfo.name" name="name" required
                            placeholder="John Doe">
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Adresse</label>
                        <input type="text" class="form-control" [(ngModel)]="shippingInfo.address" name="address"
                            required placeholder="123 Rue de la Paix">
                    </div>

                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Ville</label>
                            <input type="text" class="form-control" [(ngModel)]="shippingInfo.city" name="city" required
                                placeholder="Paris">
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Code Postal</label>
                            <input type="text" class="form-control" [(ngModel)]="shippingInfo.zip" name="zip" required
                                placeholder="75001">
                        </div>
                    </div>

                    <hr class="my-4">

                    <h4 class="mb-3">Paiement Sécurisé <i class="bi bi-shield-lock-fill text-success"></i></h4>
                    <div class="mb-3">
                        <label class="form-label">Numéro de carte (Fictif)</label>
                        <input type="text" class="form-control" [(ngModel)]="shippingInfo.cardNumber" name="cardNumber"
                            required placeholder="0000 0000 0000 0000">
                    </div>
                </form>
            </div>
        </div>

        <!-- Résumé de la commande -->
        <div class="col-md-4">
            <div class="card shadow-sm border-0 p-3 bg-light sticky-summary">
                <h4 class="card-title mb-3">Résumé</h4>
                <ul class="list-group list-group-flush mb-3">
                    <li class="list-group-item bg-transparent d-flex justify-content-between"
                        *ngFor="let item of panierService.cartItems()">
                        <span>{{item.quantity}}x {{item.title}}</span>
                        <span>{{ (item.price * item.quantity) | currency: currencyService.selectedCurrency() }}</span>
                    </li>
                </ul>
                <div class="d-flex justify-content-between fw-bold fs-5 border-top pt-2">
                    <span>Total</span>
                    <span>{{ panierService.cartTotal() | currency: currencyService.selectedCurrency() }}</span>
                </div>

                <button class="btn btn-success btn-lg mt-4 w-100" (click)="validateOrder()"
                    [disabled]="!checkoutForm.form.valid || panierService.cartItems().length === 0">
                    <i class="bi bi-check-circle"></i> Valider et Payer
                </button>
            </div>
        </div>
    </div>
</div>